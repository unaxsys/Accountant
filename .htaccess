# Block direct access to sqlite db
<Files "db.sqlite">
  Require all denied
</Files>

DirectoryIndex index.html index.php

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Canonical /statii
  RewriteRule ^statii$ /statii/ [R=301,L]
  RewriteRule ^statii/$ /statii/index.php [L,QSA]
  RewriteRule ^statii/([a-z0-9-]+)/?$ /statii/post.php?slug=$1 [L,QSA]

  # Admin posts endpoints
  RewriteRule ^admin/posts/create/?$ /admin/posts/create.php [L,QSA]
  RewriteRule ^admin/posts/update/?$ /admin/posts/update.php [L,QSA]
  RewriteRule ^admin/posts/delete/?$ /admin/posts/delete.php [L,QSA]
  RewriteRule ^admin/posts/list/?$ /admin/posts/list.php [L,QSA]
  RewriteRule ^admin/posts/publish/?$ /admin/posts/publish.php [L,QSA]
  RewriteRule ^admin/posts/unpublish/?$ /admin/posts/unpublish.php [L,QSA]

  # SEO blog routes
  RewriteRule ^blog$ /blog/ [R=301,L]
  RewriteRule ^blog/$ /blog/index.php [L,QSA]
  RewriteRule ^blog/([a-z0-9-]+)/?$ /blog.php?slug=$1 [L,QSA]

  # Blog sitemap endpoint
  RewriteRule ^sitemap-blog\.xml$ /sitemap-blog.php [L,QSA]
  RewriteRule ^sitemap\.xml$ /sitemap-blog.php [L,QSA]
</IfModule>
